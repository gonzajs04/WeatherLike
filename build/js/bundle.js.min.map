{"version":3,"sources":["app.js"],"names":["iniciarApp","btnMenu","document","querySelector","addEventListener","desplegarMenu","header","classList","toggle","cargarSpinning","clima","fetchWeather","searchCountry","apikey","city","leerApi","displayWeather","data","name","timezone","dt","icon","description","weather","temp","temp_min","temp_max","humidity","main","all","clouds","speed","wind","country","sys","feels_like","hora","Date","getHours","getMinutes","textContent","src","convertirCelcius","lat","lon","coord","leerApiDaily","mostrarClimaDias","dataDaily","daily","list","img","recorrerImagenes","p","recorrerP","forEach","value","i","contenedor","querySelectorAll","async","response2","fetch","json","error","console","log","btnSearch","inputSearch","e","key","toFixed","nameRegex","JSON","parse","stringify","normalize","replace","response","container","err","createElement","style","fontSize","appendChild","setTimeout","blanquearCard","divSpin","body","add"],"mappings":"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","file":"bundle.js","sourcesContent":["document.addEventListener('DOMContentLoaded',()=>{\r\n     cargarSpinning();\r\n\r\n    clima.fetchWeather(\"Buenos Aires\");\r\n    searchCountry(); //LLAMO A ESTA FUNCION PARA QUE ESTE DISPONIBLE PARA USAR EN CUALQUIER MOMENTO\r\n\r\n    iniciarApp();\r\n})\r\n\r\n\r\nfunction iniciarApp(){\r\n    const btnMenu = document.querySelector('.menu');\r\n    if (btnMenu!=null){\r\n        btnMenu.addEventListener('click',()=>{\r\n            desplegarMenu();\r\n        })\r\n     \r\n    }\r\n}\r\n\r\nfunction desplegarMenu(){\r\n    const header = document.querySelector('.header');\r\n    const containerNav = document.querySelector('.container-nav');\r\n    containerNav.classList.toggle('visible');\r\n    header.classList.toggle('visible');\r\n\r\n}\r\n\r\n\r\nlet clima = {\r\n    apikey: \"0497c943d5a50cd659115ae71d5fa56e\",\r\n\r\n    fetchWeather: (city)=>{ //ES LLAMADA CADA VEZ QUE QUEREMOS BUSCAR UNA CIUDAD EN LA API\r\n        leerApi(city);\r\n    },\r\n\r\n    displayWeather: (data)=>{ //MUESTRA LOS DATOS Y ES LLAMADO DESDE LEER API, QUE LO QUE HACE ES LEER LA API Y LLAMAR A DISPLAY WEATHER()\r\n\r\n        const {name,timezone,dt} = data;\r\n   \r\n        const {icon,description} = data.weather[0];\r\n        const {temp,temp_min,temp_max,humidity} = data.main;\r\n        const {all} = data.clouds;\r\n        const {speed} = data.wind;\r\n        const {country} = data.sys;\r\n        const {feels_like} = data.main;\r\n\r\n \r\n   \r\n        const hora = new Date().getHours() + ':' + new Date().getMinutes();\r\n\r\n     \r\n        \r\n        ///////////////////////////////////////////desplegar en HTML DEL MOMENTO DE AHORA\r\n        document.querySelector('.container-pais h2').textContent = name;\r\n        document.querySelector('.container-logo-clima img').src = `http://openweathermap.org/img/w/${icon}.png`\r\n        document.querySelector('.container-temperatura p').textContent=convertirCelcius(temp) + \" C°\";\r\n        document.querySelector('.container-clima h3').textContent = description;\r\n        document.querySelector('.humedad-span').textContent = humidity + \"% |\";\r\n        document.querySelector('.container-viento span').textContent = speed + \"km/h |\";\r\n        document.querySelector('.container-clouds span').textContent = all + \"% |\";\r\n        document.querySelector('.image-back').src = `https://source.unsplash.com/1600x900/?${name}`; //Saco fuente para imagenes Random dependiendo de lo que busque\r\n        document.querySelector('.span-hora').textContent = hora + ' ' + country;\r\n        document.querySelector('.span-tempmin').textContent = \"Min \" + convertirCelcius(temp_min) + \"C°\";\r\n        document.querySelector('.span-tempmax').textContent = \"Max \" + convertirCelcius(temp_max) + \"C°\";\r\n \r\n\r\n         document.querySelector('.container-sensacion span').textContent = convertirCelcius(feels_like) + \"C°\";\r\n        /////////////////////////////////////////////////\r\n        const {lat,lon} = data.coord;\r\n        leerApiDaily(lat,lon);\r\n\r\n    \r\n    },\r\n\r\n    mostrarClimaDias: (dataDaily)=>{\r\n\r\n       \r\n        const daily = dataDaily.list;\r\n      \r\n\r\n        const img = recorrerImagenes('.container-daily-img img');\r\n\r\n        const p = recorrerP('.container-daily-temp p');\r\n\r\n        daily.forEach((value,i)=>{\r\n\r\n        if(i<7){\r\n\r\n            const{temp} = value.main;\r\n      \r\n            const {icon} = value.weather[0];\r\n    \r\n            img[i].src = `http://openweathermap.org/img/w/${icon}.png`\r\n            p[i].textContent = convertirCelcius(temp) + \" C°\";\r\n           \r\n\r\n        }\r\n       })\r\n        \r\n\r\n    },\r\n\r\n    searchCountry : ()=>{ //FUNCION QUE MEDIANTE LUPA O ENTER LLAMA A LA FUNCION FETCH WEATHER LA CUAL RECIBE EL VALOR DEL INPUT Y SE LO PASA A LA API PARA BUSCAR LA CIUDAD\r\n        clima.fetchWeather(document.querySelector('.search').value);\r\n    }\r\n\r\n    \r\n    \r\n}\r\n\r\nfunction recorrerP(contenedor){\r\n    const p = document.querySelectorAll(contenedor)\r\n    return p;\r\n}\r\n\r\n\r\nfunction recorrerImagenes(contenedor){\r\n    const imagenes = document.querySelectorAll(contenedor);\r\n    return imagenes;\r\n}\r\n\r\n\r\nasync function leerApiDaily(lat,lon){\r\n\r\ntry{\r\n    const response2 = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=0497c943d5a50cd659115ae71d5fa56e`);\r\n    const dataDaily =  await response2.json();\r\n\r\n\r\n\r\n    clima.mostrarClimaDias(dataDaily);\r\n\r\n}catch(error){\r\n    console.log(error)\r\n}\r\n\r\n\r\n}\r\n\r\nfunction searchCountry(){\r\n\r\n    const btnSearch = document.querySelector('.logo-lupa button');\r\n    const inputSearch = document.querySelector('.search');\r\n\r\n\r\n    //BUSCA AL APRETAR EN BUSCAR EN LA LUPA\r\n    btnSearch.addEventListener('click',()=>{\r\n \r\n        clima.searchCountry();\r\n    })\r\n\r\n    //BUSCAR AL APRETAR ENTER\r\n    inputSearch.addEventListener('keyup',(e)=>{\r\n        if(e.key == \"Enter\"){\r\n            clima.searchCountry();\r\n        }\r\n        \r\n    })\r\n\r\n}\r\n\r\nfunction convertirCelcius(temp){\r\n\r\n    const tempC = temp - 273.15;\r\n    return tempC.toFixed(1);\r\n}\r\n\r\n\r\nasync function leerApi(city){\r\n\r\n    \r\n \r\n    \r\n    try{\r\n        let nameRegex = JSON.parse(JSON.stringify(city)); //CLONA VARIABLE SIN PASAR POR REFERENCIA\r\n\r\n        nameRegex = nameRegex.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\") //ME TRANSFORMA ACENTOS A SIN ACENTOS\r\n\r\n\r\n        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${nameRegex}&appid=0497c943d5a50cd659115ae71d5fa56e`);\r\n        const data = await response.json();\r\n\r\n        clima.displayWeather(data);\r\n       \r\n    }catch(error){\r\n\r\n        container = document.querySelector('.container-pais');\r\n        const err = document.createElement('P');\r\n\r\n        err.style.fontSize = \"2rem\";\r\n        container.appendChild(err);\r\n        err.textContent =  \"NO EXISTE LA CIUDAD SOLICITADA\";\r\n\r\n        setTimeout(()=>{\r\n            err.textContent =  \"\";\r\n        },2000)\r\n      \r\n        blanquearCard();\r\n\r\n    }\r\n}\r\n\r\n\r\n/////////////////////////////////////////////////////////////\r\n\r\nfunction blanquearCard(){\r\n    document.querySelector('.container-pais h2').textContent = '';\r\n    document.querySelector('.container-logo-clima img').src = '';\r\n    document.querySelector('.container-temperatura p').textContent='';\r\n    document.querySelector('.container-clima h3').textContent = '';\r\n    document.querySelector('.humedad-span').textContent = '';\r\n    document.querySelector('.container-viento span').textContent = '';\r\n    document.querySelector('.container-clouds span').textContent = '';\r\n    document.querySelector('.container-sensacion span').textContent = '';\r\n    document.querySelector('.container-sensacion span').textContent = '';\r\n\r\n    document.querySelector('.span-tempmin').textContent = '';\r\n\r\n    document.querySelector('.span-tempmax').textContent = '';\r\n    document.querySelector('.span-hora').textContent = '';\r\n\r\n\r\n\r\n}\r\n\r\nfunction cargarSpinning(){\r\n     const divSpin = document.querySelector('.spinning');\r\n     const body = document.querySelector('body');\r\n\r\n     setTimeout(()=>{\r\n        body.classList.add('no-fijo')\r\n         divSpin.classList.add('no-visible');\r\n     },2000);\r\n\r\n}\r\n\r\n\r\n////////////////INICIAR APP\r\n\r\n\r\n"]}